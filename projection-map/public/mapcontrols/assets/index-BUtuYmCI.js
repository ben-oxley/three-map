var Un=Object.defineProperty;var Hn=(o,t,i)=>t in o?Un(o,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[t]=i;var b=(o,t,i)=>(Hn(o,typeof t!="symbol"?t+"":t,i),i);import{g as sn,c as je,m as Ne}from"./maplibre-DHezvgov.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();const Nn="modulepreload",Gn=function(o){return"/"+o},hn={},Kn=function(t,i,a){let l=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));l=Promise.all(i.map(h=>{if(h=Gn(h),h in hn)return;hn[h]=!0;const _=h.endsWith(".css"),S=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${S}`))return;const w=document.createElement("link");if(w.rel=_?"stylesheet":Nn,_||(w.as="script",w.crossOrigin=""),w.href=h,f&&w.setAttribute("nonce",f),document.head.appendChild(w),_)return new Promise((x,L)=>{w.addEventListener("load",x),w.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${h}`)))})}))}return l.then(()=>t()).catch(u=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u})};function Wn(o={}){const{immediate:t=!1,onNeedRefresh:i,onOfflineReady:a,onRegistered:l,onRegisteredSW:u,onRegisterError:f}=o;let h,_;const S=async(x=!0)=>{await _};async function w(){if("serviceWorker"in navigator){if(h=await Kn(()=>import("./workbox-window.prod.es5-D5gOYdM7.js"),[]).then(({Workbox:x})=>new x("/sw.js",{scope:"/",type:"classic"})).catch(x=>{f==null||f(x)}),!h)return;h.addEventListener("activated",x=>{(x.isUpdate||x.isExternal)&&window.location.reload()}),h.addEventListener("installed",x=>{x.isUpdate||a==null||a()}),h.register({immediate:t}).then(x=>{u?u("/sw.js",x):l==null||l(x)}).catch(x=>{f==null||f(x)})}}return _=w(),S}var ti={exports:{}};ti.exports;(function(o,t){var i=200,a="Expected a function",l="__lodash_hash_undefined__",u=1,f=2,h=1/0,_=9007199254740991,S="[object Arguments]",w="[object Array]",x="[object Boolean]",L="[object Date]",j="[object Error]",O="[object Function]",U="[object GeneratorFunction]",Y="[object Map]",te="[object Number]",H="[object Object]",N="[object Promise]",ie="[object RegExp]",q="[object Set]",ke="[object String]",rt="[object Symbol]",ot="[object WeakMap]",zt="[object ArrayBuffer]",Le="[object DataView]",Ct="[object Float32Array]",Ge="[object Float64Array]",oi="[object Int8Array]",ai="[object Int16Array]",li="[object Int32Array]",si="[object Uint8Array]",ci="[object Uint8ClampedArray]",ui="[object Uint16Array]",pi="[object Uint32Array]",fi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,di=/^\w*$/,hi=/^\./,yi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_i=/[\\^$.*+?()[\]{}|]/g,M=/\\(\\)?/g,Lt=/^\[object .+?Constructor\]$/,mi=/^(?:0|[1-9]\d*)$/,A={};A[Ct]=A[Ge]=A[oi]=A[ai]=A[li]=A[si]=A[ci]=A[ui]=A[pi]=!0,A[S]=A[w]=A[zt]=A[x]=A[Le]=A[L]=A[j]=A[O]=A[Y]=A[te]=A[H]=A[ie]=A[q]=A[ke]=A[ot]=!1;var at=typeof je=="object"&&je&&je.Object===Object&&je,At=typeof self=="object"&&self&&self.Object===Object&&self,se=at||At||Function("return this")(),Ke=t&&!t.nodeType&&t,lt=Ke&&!0&&o&&!o.nodeType&&o,Tt=lt&&lt.exports===Ke,Pt=Tt&&at.process,Ot=function(){try{return Pt&&Pt.binding("util")}catch{}}(),Et=Ot&&Ot.isTypedArray;function gi(e,n,c){switch(c.length){case 0:return e.call(n);case 1:return e.call(n,c[0]);case 2:return e.call(n,c[0],c[1]);case 3:return e.call(n,c[0],c[1],c[2])}return e.apply(n,c)}function Mt(e,n){for(var c=-1,p=e?e.length:0,g=Array(p);++c<p;)g[c]=n(e[c],c,e);return g}function bi(e,n){for(var c=-1,p=n.length,g=e.length;++c<p;)e[g+c]=n[c];return e}function vi(e,n){for(var c=-1,p=e?e.length:0;++c<p;)if(n(e[c],c,e))return!0;return!1}function wi(e){return function(n){return n==null?void 0:n[e]}}function xi(e,n){var c=e.length;for(e.sort(n);c--;)e[c]=e[c].value;return e}function Si(e,n){for(var c=-1,p=Array(e);++c<e;)p[c]=n(c);return p}function Rt(e){return function(n){return e(n)}}function zi(e,n){return e==null?void 0:e[n]}function Ae(e){var n=!1;if(e!=null&&typeof e.toString!="function")try{n=!!(e+"")}catch{}return n}function st(e){var n=-1,c=Array(e.size);return e.forEach(function(p,g){c[++n]=[g,p]}),c}function jt(e,n){return function(c){return e(n(c))}}function ne(e){var n=-1,c=Array(e.size);return e.forEach(function(p){c[++n]=p}),c}var kt=Array.prototype,Dt=Function.prototype,We=Object.prototype,qe=se["__core-js_shared__"],De=function(){var e=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ct=Dt.toString,re=We.hasOwnProperty,Te=We.toString,ve=RegExp("^"+ct.call(re).replace(_i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=se.Symbol,$t=se.Uint8Array,Ci=We.propertyIsEnumerable,ut=kt.splice,Pe=$e?$e.isConcatSpreadable:void 0,pt=jt(Object.keys,Object),Ze=Math.max,Be=Me(se,"DataView"),ce=Me(se,"Map"),ft=Me(se,"Promise"),dt=Me(se,"Set"),ht=Me(se,"WeakMap"),Ie=Me(Object,"create"),Li=I(Be),Bt=I(ce),yt=I(ft),we=I(dt),Ai=I(ht),Ve=$e?$e.prototype:void 0,_t=Ve?Ve.valueOf:void 0,It=Ve?Ve.toString:void 0;function xe(e){var n=-1,c=e?e.length:0;for(this.clear();++n<c;){var p=e[n];this.set(p[0],p[1])}}function ue(){this.__data__=Ie?Ie(null):{}}function Ti(e){return this.has(e)&&delete this.__data__[e]}function Pi(e){var n=this.__data__;if(Ie){var c=n[e];return c===l?void 0:c}return re.call(n,e)?n[e]:void 0}function Oi(e){var n=this.__data__;return Ie?n[e]!==void 0:re.call(n,e)}function Ei(e,n){var c=this.__data__;return c[e]=Ie&&n===void 0?l:n,this}xe.prototype.clear=ue,xe.prototype.delete=Ti,xe.prototype.get=Pi,xe.prototype.has=Oi,xe.prototype.set=Ei;function pe(e){var n=-1,c=e?e.length:0;for(this.clear();++n<c;){var p=e[n];this.set(p[0],p[1])}}function Se(){this.__data__=[]}function Mi(e){var n=this.__data__,c=Qe(n,e);if(c<0)return!1;var p=n.length-1;return c==p?n.pop():ut.call(n,c,1),!0}function Ri(e){var n=this.__data__,c=Qe(n,e);return c<0?void 0:n[c][1]}function ji(e){return Qe(this.__data__,e)>-1}function ki(e,n){var c=this.__data__,p=Qe(c,e);return p<0?c.push([e,n]):c[p][1]=n,this}pe.prototype.clear=Se,pe.prototype.delete=Mi,pe.prototype.get=Ri,pe.prototype.has=ji,pe.prototype.set=ki;function fe(e){var n=-1,c=e?e.length:0;for(this.clear();++n<c;){var p=e[n];this.set(p[0],p[1])}}function Xe(){this.__data__={hash:new xe,map:new(ce||pe),string:new xe}}function Di(e){return tt(this,e).delete(e)}function $i(e){return tt(this,e).get(e)}function _e(e){return tt(this,e).has(e)}function Bi(e,n){return tt(this,e).set(e,n),this}fe.prototype.clear=Xe,fe.prototype.delete=Di,fe.prototype.get=$i,fe.prototype.has=_e,fe.prototype.set=Bi;function Je(e){var n=-1,c=e?e.length:0;for(this.__data__=new fe;++n<c;)this.add(e[n])}function Ii(e){return this.__data__.set(e,l),this}function Fi(e){return this.__data__.has(e)}Je.prototype.add=Je.prototype.push=Ii,Je.prototype.has=Fi;function de(e){this.__data__=new pe(e)}function Ui(){this.__data__=new pe}function Ye(e){return this.__data__.delete(e)}function Hi(e){return this.__data__.get(e)}function Fe(e){return this.__data__.has(e)}function Ft(e,n){var c=this.__data__;if(c instanceof pe){var p=c.__data__;if(!ce||p.length<i-1)return p.push([e,n]),this;c=this.__data__=new fe(p)}return c.set(e,n),this}de.prototype.clear=Ui,de.prototype.delete=Ye,de.prototype.get=Hi,de.prototype.has=Fe,de.prototype.set=Ft;function Ut(e,n){var c=ye(e)||he(e)?Si(e.length,String):[],p=c.length,g=!!p;for(var y in e)re.call(e,y)&&!(g&&(y=="length"||m(y,p)))&&c.push(y);return c}function Qe(e,n){for(var c=e.length;c--;)if(ee(e[c][0],n))return c;return-1}var Ni=qt(Ht);function Gi(e,n,c,p,g){var y=-1,v=e.length;for(c||(c=d),g||(g=[]);++y<v;){var P=e[y];c(P)?bi(g,P):g[g.length]=P}return g}var Ki=Zt();function Ht(e,n){return e&&Ki(e,n,Jt)}function Nt(e,n){n=z(n,e)?[n]:Wt(n);for(var c=0,p=n.length;e!=null&&c<p;)e=e[$(n[c++])];return c&&c==p?e:void 0}function Wi(e){return Te.call(e)}function Gt(e,n){return e!=null&&n in Object(e)}function Oe(e,n,c,p,g){return e===n?!0:e==null||n==null||!bt(e)&&!Xt(n)?e!==e&&n!==n:Ee(e,n,Oe,c,p,g)}function Ee(e,n,c,p,g,y){var v=ye(e),P=ye(n),T=w,k=w;v||(T=r(e),T=T==S?H:T),P||(k=r(n),k=k==S?H:k);var V=T==H&&!Ae(e),X=k==H&&!Ae(n),K=T==k;if(K&&!V)return y||(y=new de),v||Dn(e)?gt(e,n,c,p,g,y):Ue(e,n,T,c,p,g,y);if(!(g&f)){var ae=V&&re.call(e,"__wrapped__"),le=X&&re.call(n,"__wrapped__");if(ae||le){var Re=ae?e.value():e,Ce=le?n.value():n;return y||(y=new de),c(Re,Ce,p,g,y)}}return K?(y||(y=new de),Vt(e,n,c,p,g,y)):!1}function qi(e,n,c,p){var g=c.length,y=g;if(e==null)return!y;for(e=Object(e);g--;){var v=c[g];if(v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++g<y;){v=c[g];var P=v[0],T=e[P],k=v[1];if(v[2]){if(T===void 0&&!(P in e))return!1}else{var V=new de,X;if(!(X===void 0?Oe(k,T,p,u|f,V):X))return!1}}return!0}function Zi(e){if(!bt(e)||B(e))return!1;var n=pn(e)||Ae(e)?ve:Lt;return n.test(I(e))}function me(e){return Xt(e)&&rn(e.length)&&!!A[Te.call(e)]}function Vi(e){return typeof e=="function"?e:e==null?fn:typeof e=="object"?ye(e)?Qi(e[0],e[1]):Yi(e):Fn(e)}function Xi(e){if(!F(e))return pt(e);var n=[];for(var c in Object(e))re.call(e,c)&&c!="constructor"&&n.push(c);return n}function Ji(e,n){var c=-1,p=ge(e)?Array(e.length):[];return Ni(e,function(g,y,v){p[++c]=n(g,y,v)}),p}function Yi(e){var n=nn(e);return n.length==1&&n[0][2]?G(n[0][0],n[0][1]):function(c){return c===e||qi(c,e,n)}}function Qi(e,n){return z(e)&&R(n)?G($(e),n):function(c){var p=Bn(c,e);return p===void 0&&p===n?In(c,e):Oe(n,p,void 0,u|f)}}function ze(e,n,c){var p=-1;n=Mt(n.length?n:[fn],Rt(Vi));var g=Ji(e,function(y,v,P){var T=Mt(n,function(k){return k(y)});return{criteria:T,index:++p,value:y}});return xi(g,function(y,v){return tn(y,v,c)})}function Kt(e){return function(n){return Nt(n,e)}}function en(e,n){return n=Ze(n===void 0?e.length-1:n,0),function(){for(var c=arguments,p=-1,g=Ze(c.length-n,0),y=Array(g);++p<g;)y[p]=c[n+p];p=-1;for(var v=Array(n+1);++p<n;)v[p]=c[p];return v[n]=y,gi(e,this,v)}}function et(e){if(typeof e=="string")return e;if(vt(e))return It?It.call(e):"";var n=e+"";return n=="0"&&1/e==-h?"-0":n}function Wt(e){return ye(e)?e:Q(e)}function mt(e,n){if(e!==n){var c=e!==void 0,p=e===null,g=e===e,y=vt(e),v=n!==void 0,P=n===null,T=n===n,k=vt(n);if(!P&&!k&&!y&&e>n||y&&v&&T&&!P&&!k||p&&v&&T||!c&&T||!g)return 1;if(!p&&!y&&!k&&e<n||k&&c&&g&&!p&&!y||P&&c&&g||!v&&g||!T)return-1}return 0}function tn(e,n,c){for(var p=-1,g=e.criteria,y=n.criteria,v=g.length,P=c.length;++p<v;){var T=mt(g[p],y[p]);if(T){if(p>=P)return T;var k=c[p];return T*(k=="desc"?-1:1)}}return e.index-n.index}function qt(e,n){return function(c,p){if(c==null)return c;if(!ge(c))return e(c,p);for(var g=c.length,y=-1,v=Object(c);++y<g&&p(v[y],y,v)!==!1;);return c}}function Zt(e){return function(n,c,p){for(var g=-1,y=Object(n),v=p(n),P=v.length;P--;){var T=v[++g];if(c(y[T],T,y)===!1)break}return n}}function gt(e,n,c,p,g,y){var v=g&f,P=e.length,T=n.length;if(P!=T&&!(v&&T>P))return!1;var k=y.get(e);if(k&&y.get(n))return k==n;var V=-1,X=!0,K=g&u?new Je:void 0;for(y.set(e,n),y.set(n,e);++V<P;){var ae=e[V],le=n[V];if(p)var Re=v?p(le,ae,V,n,e,y):p(ae,le,V,e,n,y);if(Re!==void 0){if(Re)continue;X=!1;break}if(K){if(!vi(n,function(Ce,He){if(!K.has(He)&&(ae===Ce||c(ae,Ce,p,g,y)))return K.add(He)})){X=!1;break}}else if(!(ae===le||c(ae,le,p,g,y))){X=!1;break}}return y.delete(e),y.delete(n),X}function Ue(e,n,c,p,g,y,v){switch(c){case Le:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case zt:return!(e.byteLength!=n.byteLength||!p(new $t(e),new $t(n)));case x:case L:case te:return ee(+e,+n);case j:return e.name==n.name&&e.message==n.message;case ie:case ke:return e==n+"";case Y:var P=st;case q:var T=y&f;if(P||(P=ne),e.size!=n.size&&!T)return!1;var k=v.get(e);if(k)return k==n;y|=u,v.set(e,n);var V=gt(P(e),P(n),p,g,y,v);return v.delete(e),V;case rt:if(_t)return _t.call(e)==_t.call(n)}return!1}function Vt(e,n,c,p,g,y){var v=g&f,P=Jt(e),T=P.length,k=Jt(n),V=k.length;if(T!=V&&!v)return!1;for(var X=T;X--;){var K=P[X];if(!(v?K in n:re.call(n,K)))return!1}var ae=y.get(e);if(ae&&y.get(n))return ae==n;var le=!0;y.set(e,n),y.set(n,e);for(var Re=v;++X<T;){K=P[X];var Ce=e[K],He=n[K];if(p)var dn=v?p(He,Ce,K,n,e,y):p(Ce,He,K,e,n,y);if(!(dn===void 0?Ce===He||c(Ce,He,p,g,y):dn)){le=!1;break}Re||(Re=K=="constructor")}if(le&&!Re){var Yt=e.constructor,Qt=n.constructor;Yt!=Qt&&"constructor"in e&&"constructor"in n&&!(typeof Yt=="function"&&Yt instanceof Yt&&typeof Qt=="function"&&Qt instanceof Qt)&&(le=!1)}return y.delete(e),y.delete(n),le}function tt(e,n){var c=e.__data__;return D(n)?c[typeof n=="string"?"string":"hash"]:c.map}function nn(e){for(var n=Jt(e),c=n.length;c--;){var p=n[c],g=e[p];n[c]=[p,g,R(g)]}return n}function Me(e,n){var c=zi(e,n);return Zi(c)?c:void 0}var r=Wi;(Be&&r(new Be(new ArrayBuffer(1)))!=Le||ce&&r(new ce)!=Y||ft&&r(ft.resolve())!=N||dt&&r(new dt)!=q||ht&&r(new ht)!=ot)&&(r=function(e){var n=Te.call(e),c=n==H?e.constructor:void 0,p=c?I(c):void 0;if(p)switch(p){case Li:return Le;case Bt:return Y;case yt:return N;case we:return q;case Ai:return ot}return n});function s(e,n,c){n=z(n,e)?[n]:Wt(n);for(var p,g=-1,v=n.length;++g<v;){var y=$(n[g]);if(!(p=e!=null&&c(e,y)))break;e=e[y]}if(p)return p;var v=e?e.length:0;return!!v&&rn(v)&&m(y,v)&&(ye(e)||he(e))}function d(e){return ye(e)||he(e)||!!(Pe&&e&&e[Pe])}function m(e,n){return n=n??_,!!n&&(typeof e=="number"||mi.test(e))&&e>-1&&e%1==0&&e<n}function E(e,n,c){if(!bt(c))return!1;var p=typeof n;return(p=="number"?ge(c)&&m(n,c.length):p=="string"&&n in c)?ee(c[n],e):!1}function z(e,n){if(ye(e))return!1;var c=typeof e;return c=="number"||c=="symbol"||c=="boolean"||e==null||vt(e)?!0:di.test(e)||!fi.test(e)||n!=null&&e in Object(n)}function D(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function B(e){return!!De&&De in e}function F(e){var n=e&&e.constructor,c=typeof n=="function"&&n.prototype||We;return e===c}function R(e){return e===e&&!bt(e)}function G(e,n){return function(c){return c==null?!1:c[e]===n&&(n!==void 0||e in Object(c))}}var Q=oe(function(e){e=$n(e);var n=[];return hi.test(e)&&n.push(""),e.replace(yi,function(c,p,g,y){n.push(g?y.replace(M,"$1"):p||c)}),n});function $(e){if(typeof e=="string"||vt(e))return e;var n=e+"";return n=="0"&&1/e==-h?"-0":n}function I(e){if(e!=null){try{return ct.call(e)}catch{}try{return e+""}catch{}}return""}var Z=en(function(e,n){if(e==null)return[];var c=n.length;return c>1&&E(e,n[0],n[1])?n=[]:c>2&&E(n[0],n[1],n[2])&&(n=[n[0]]),ze(e,Gi(n),[])});function oe(e,n){if(typeof e!="function"||n&&typeof n!="function")throw new TypeError(a);var c=function(){var p=arguments,g=n?n.apply(this,p):p[0],y=c.cache;if(y.has(g))return y.get(g);var v=e.apply(this,p);return c.cache=y.set(g,v),v};return c.cache=new(oe.Cache||fe),c}oe.Cache=fe;function ee(e,n){return e===n||e!==e&&n!==n}function he(e){return it(e)&&re.call(e,"callee")&&(!Ci.call(e,"callee")||Te.call(e)==S)}var ye=Array.isArray;function ge(e){return e!=null&&rn(e.length)&&!pn(e)}function it(e){return Xt(e)&&ge(e)}function pn(e){var n=bt(e)?Te.call(e):"";return n==O||n==U}function rn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_}function bt(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function Xt(e){return!!e&&typeof e=="object"}function vt(e){return typeof e=="symbol"||Xt(e)&&Te.call(e)==rt}var Dn=Et?Rt(Et):me;function $n(e){return e==null?"":et(e)}function Bn(e,n,c){var p=e==null?void 0:Nt(e,n);return p===void 0?c:p}function In(e,n){return e!=null&&s(e,n,Gt)}function Jt(e){return ge(e)?Ut(e):Xi(e)}function fn(e){return e}function Fn(e){return z(e)?wi($(e)):Kt(e)}o.exports=Z})(ti,ti.exports);var qn=ti.exports;const Zn=sn(qn),Vn=[{id:"water",type:"fill",source:"openmaptiles","source-layer":"water",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"rgb(194, 200, 202)","fill-antialias":!0}},{id:"landcover_ice_shelf",type:"fill",source:"openmaptiles","source-layer":"landcover",maxzoom:8,filter:["all",["==","$type","Polygon"],["==","subclass","ice_shelf"]],layout:{visibility:"visible"},paint:{"fill-color":"hsl(0, 0%, 98%)","fill-opacity":.7}},{id:"landuse_residential",type:"fill",source:"openmaptiles","source-layer":"landuse",maxzoom:16,filter:["all",["==","$type","Polygon"],["==","class","residential"]],layout:{visibility:"visible"},paint:{"fill-color":"rgb(234, 234, 230)","fill-opacity":["interpolate",["exponential",.6],["zoom"],8,.8,9,.6]}},{id:"waterway",type:"line",source:"openmaptiles","source-layer":"waterway",filter:["all",["==","$type","LineString"]],layout:{visibility:"visible"},paint:{"line-color":"hsl(195, 17%, 78%)"}},{id:"water_name",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["==","$type","LineString"],layout:{"text-field":`{name:latin}
{name:nonlatin}`,"symbol-placement":"line","text-rotation-alignment":"map","symbol-spacing":500,"text-font":["Open Sans Regular"],"text-size":12},paint:{"text-color":"rgb(157,169,177)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1}},{id:"building",type:"fill",source:"openmaptiles","source-layer":"building",minzoom:12,paint:{"fill-color":"rgb(234, 234, 229)","fill-outline-color":"rgb(219, 219, 218)","fill-antialias":!0}},{id:"tunnel_motorway_casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgb(213, 213, 213)","line-width":["interpolate",["exponential",1.4],["zoom"],5.8,0,6,3,20,40]}},{id:"tunnel_motorway_inner",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"rgb(234,234,234)","line-width":["interpolate",["exponential",1.4],["zoom"],4,2,6,1.3,20,30]}},{id:"aeroway-taxiway",type:"line",source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsl(0, 0%, 88%)","line-width":["interpolate",["exponential",1.55],["zoom"],13,1.8,20,20]}},{id:"aeroway-runway-casing",type:"line",source:"openmaptiles","source-layer":"aeroway",minzoom:11,filter:["all",["in","class","runway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsl(0, 0%, 88%)","line-width":["interpolate",["exponential",1.5],["zoom"],11,4,17,55]}},{id:"aeroway-area",type:"fill",source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":["interpolate",["linear"],["zoom"],13,0,14,1],"fill-color":"rgba(255, 255, 255, 1)"}},{id:"aeroway-runway",type:"line",source:"openmaptiles","source-layer":"aeroway",minzoom:11,maxzoom:24,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(255, 255, 255, 1)","line-width":["interpolate",["exponential",1.5],["zoom"],11,4,17,50]}},{id:"highway_minor",type:"line",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation",minzoom:8,filter:["all",["==","$type","LineString"],["in","class","minor","service","track"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsl(0, 0%, 88%)","line-width":["interpolate",["exponential",1.55],["zoom"],13,1.8,20,20],"line-opacity":.9}},{id:"highway_major_casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:11,filter:["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgb(213, 213, 213)","line-dasharray":[12,0],"line-width":["interpolate",["exponential",1.3],["zoom"],10,3,20,23]}},{id:"highway_major_inner",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:11,filter:["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fff","line-width":["interpolate",["exponential",1.3],["zoom"],10,2,20,20]}},{id:"highway_major_subtle",type:"line",source:"openmaptiles","source-layer":"transportation",maxzoom:11,filter:["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsla(0, 0%, 85%, 0.69)","line-width":2}},{id:"highway_motorway_casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgb(213, 213, 213)","line-width":["interpolate",["exponential",1.4],["zoom"],5.8,0,6,3,20,40],"line-dasharray":[2,0]}},{id:"highway_motorway_inner",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":["interpolate-hcl",["linear"],["zoom"],6,"hsla(0, 0%, 85%, 0.53)",8,"#fff"],"line-width":["interpolate",["exponential",1.4],["zoom"],4,2,6,1.3,20,30]}},{id:"highway_motorway_subtle",type:"line",source:"openmaptiles","source-layer":"transportation",maxzoom:6,filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"hsla(0, 0%, 85%, 0.53)","line-width":["interpolate",["exponential",1.4],["zoom"],4,2,6,1.3]}},{id:"railway_transit",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:16,filter:["all",["==","$type","LineString"],["all",["==","class","transit"],["!in","brunnel","tunnel"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#dddddd","line-width":3}},{id:"railway_transit_dashline",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:16,filter:["all",["==","$type","LineString"],["all",["==","class","transit"],["!in","brunnel","tunnel"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#fafafa","line-width":2,"line-dasharray":[3,3]}},{id:"railway_service",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:16,filter:["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#dddddd","line-width":3}},{id:"railway_service_dashline",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:16,filter:["all",["==","$type","LineString"],["==","class","rail"],["has","service"]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#fafafa","line-width":2,"line-dasharray":[3,3]}},{id:"railway",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!has","service"],["==","class","rail"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#dddddd","line-width":["interpolate",["exponential",1.3],["zoom"],9,2,20,7]}},{id:"railway_dashline",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!has","service"],["==","class","rail"]]],layout:{visibility:"visible","line-join":"round"},paint:{"line-color":"#fafafa","line-width":["interpolate",["exponential",1.3],["zoom"],9,1,20,6],"line-dasharray":[3,3]}},{id:"highway_motorway_bridge_casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","motorway"]]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"rgb(213, 213, 213)","line-width":["interpolate",["exponential",1.4],["zoom"],5.8,0,6,5,20,45],"line-dasharray":[2,0]}},{id:"highway_motorway_bridge_inner",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":["interpolate-hcl",["linear"],["zoom"],5.8,"hsla(0, 0%, 85%, 0.53)",6,"#fff"],"line-width":["interpolate",["exponential",1.4],["zoom"],4,2,6,1.3,20,30]}},{id:"highway_name_motorway",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"text-size":10,"symbol-spacing":350,"text-font":["Open Sans Regular"],"symbol-placement":"line",visibility:"visible","text-rotation-alignment":"viewport","text-pitch-alignment":"viewport","text-field":"{ref}"},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"hsl(0, 0%, 100%)","text-translate":[0,2],"text-halo-width":1,"text-halo-blur":1}},{id:"boundary_state",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["==","admin_level",4],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"rgb(230, 204, 207)","line-width":["interpolate",["linear"],["zoom"],3,1,22,15],"line-blur":.4,"line-dasharray":[2,2],"line-opacity":1}},{id:"boundary_country",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["==","admin_level",2],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgb(230, 204, 207)","line-width":["interpolate",["exponential",1.1],["zoom"],3,1,22,20],"line-blur":["interpolate",["linear"],["zoom"],3,.4,22,4]}},{id:"place_other",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["in","class","continent","hamlet","neighbourhood","isolated_dwelling"],["==","$type","Point"]],layout:{"text-size":10,"text-transform":"uppercase","text-font":["Open Sans Regular"],"text-justify":"center",visibility:"visible","text-offset":[.5,0],"text-anchor":"center","text-field":`{name:latin}
{name:nonlatin}`},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1}},{id:"place_suburb",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:15,filter:["all",["==","$type","Point"],["==","class","suburb"]],layout:{"text-size":10,"text-transform":"uppercase","text-font":["Open Sans Regular"],"text-justify":"center",visibility:"visible","text-offset":[.5,0],"text-anchor":"center","text-field":`{name:latin}
{name:nonlatin}`},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1}},{id:"place_village",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["==","$type","Point"],["==","class","village"]],layout:{"text-size":10,"text-transform":"uppercase","text-font":["Open Sans Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":"left","text-field":`{name:latin}
{name:nonlatin}`},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_town",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:15,filter:["all",["==","$type","Point"],["==","class","town"]],layout:{"text-size":10,"icon-image":["step",["zoom"],"circle-11",8,""],"text-transform":"uppercase","text-font":["Open Sans Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":["step",["zoom"],"left",8,"center"],"text-field":`{name:latin}
{name:nonlatin}`},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_city",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["==","$type","Point"],["all",["!=","capital",2],["==","class","city"],[">","rank",3]]],layout:{"text-size":10,"icon-image":["step",["zoom"],"circle-11",8,""],"text-transform":"uppercase","text-font":["Open Sans Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":["step",["zoom"],"left",8,"center"],"text-field":`{name:latin}
{name:nonlatin}`},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_capital",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["all",["==","capital",2],["==","class","city"]]],layout:{"text-size":14,"icon-image":["step",["zoom"],"star-11",8,""],"text-transform":"uppercase","text-font":["Open Sans Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":1,"text-anchor":["step",["zoom"],"left",8,"center"],"text-field":`{name:latin}
{name:nonlatin}`},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_city_large",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["all",["!=","capital",2],["<=","rank",3],["==","class","city"]]],layout:{"text-size":14,"icon-image":["step",["zoom"],"circle-11",8,""],"text-transform":"uppercase","text-font":["Open Sans Regular"],"text-justify":"left",visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-field":`{name:latin}
{name:nonlatin}`},paint:{"text-color":"rgb(117, 129, 145)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_state",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["==","class","state"]],layout:{visibility:"visible","text-field":`{name:latin}
{name:nonlatin}`,"text-font":["Open Sans Regular"],"text-transform":"uppercase","text-size":10},paint:{"text-color":"rgb(113, 129, 144)","text-halo-color":"rgb(242,243,240)","text-halo-width":1,"text-halo-blur":1}}],on="#DBE8A5",Xn="#2EADD9",Jn=[{id:"background",type:"background",paint:{"background-color":on}},...Vn,{id:"bounding_box",type:"fill",source:"site_plan","source-layer":"bounding_box",paint:{"fill-color":on}},{id:"slope",type:"raster",source:"slope",minzoom:5},{id:"hillshade",type:"raster",source:"hillshade",minzoom:5},{id:"ortho",type:"raster",source:"ortho",minzoom:15},{id:"background_areas_backstage",type:"fill",source:"site_plan","source-layer":"areas_backstage_polygon",paint:{"fill-pattern":"no-access"}},{id:"background_areas_camping_polygon",type:"fill",source:"site_plan","source-layer":"areas_camping_polygon",paint:{"fill-color":"#AFC944"}},{id:"background_areas_camping_outline",type:"line",source:"site_plan","source-layer":"areas_camping_polygon",paint:{"line-color":"rgba(10, 100, 10, 0.4)","line-blur":7,"line-width":3}},{id:"background_natural_woodland_polygon",type:"fill",source:"site_plan","source-layer":"natural_woodland_polygon",layout:{},paint:{"fill-color":"#528329"}},{id:"background_natural_hedges_polygon",type:"fill",source:"site_plan","source-layer":"natural_hedges_polygon",layout:{},paint:{"fill-color":"#528329"}},{id:"background_water_linestring",type:"line",source:"site_plan","source-layer":"natural_water_linestring",layout:{"line-cap":"round","line-join":"round","line-round-limit":1.1},paint:{"line-color":Xn,"line-width":["interpolate",["linear"],["zoom"],13,1,15,2,18,6]}},{id:"background_water_polygon",type:"fill",source:"site_plan","source-layer":"natural_water_polygon",layout:{},paint:{"fill-pattern":"water"}},{id:"background_water_polygon_shadow",type:"line",source:"site_plan","source-layer":"natural_water_polygon",layout:{},paint:{"line-color":"#1D718C","line-width":["interpolate",["linear"],["zoom"],13,0,18,2]}},{id:"paths_fire",type:"fill",source:"site_plan","source-layer":"paths_fire_polygon",layout:{},paint:{"fill-color":on}},{id:"paths_tracks_case",type:"line",source:"site_plan","source-layer":"paths_roads_polygon",minzoom:0,layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":["interpolate",["linear"],["zoom"],12,0,17,5],"line-color":"rgba(132, 131, 131, 1)","line-blur":.5}},{id:"paths_trackway_case",type:"line",source:"site_plan","source-layer":"paths_trackway_polygon",layout:{},paint:{"line-width":3,"line-color":"rgba(140, 140, 140, 1)"}},{id:"paths_trackway",type:"fill",source:"site_plan","source-layer":"paths_trackway_polygon",layout:{},paint:{"fill-color":"rgba(185, 185, 185, 1)"}},{id:"paths_tracks",type:"fill",source:"site_plan","source-layer":"paths_roads_polygon",minzoom:0,paint:{"fill-color":"rgba(177, 165, 147, 1)","fill-outline-color":"rgba(98, 98, 97, 0)"}},{id:"heras",type:"line",source:"site_plan","source-layer":"heras_internal__linestring",paint:{"line-color":"rgba(148, 63, 63, 1)"}},{id:"structures_shadow",type:"line",source:"site_plan","source-layer":"structures_polygon",minzoom:0,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(0, 0, 0, 0.3)","line-width":6,"line-blur":3}},{id:"structures_polygon",type:"fill",source:"site_plan","source-layer":"structures_polygon",minzoom:0,paint:{"fill-color":"#F9E200"}},{id:"structures_outline",type:"line",source:"site_plan","source-layer":"structures_polygon",minzoom:0,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(90, 81, 31, 1)"}},{id:"structures_linestring",type:"line",source:"site_plan","source-layer":"structures_linestring",minzoom:0,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(90, 81, 31, 1)"}},{id:"structures_guys",type:"line",source:"site_plan","source-layer":"structures_guys_&_poles_linestring",minzoom:0,paint:{"line-color":"rgb(153, 144, 93)"}},{id:"structures_exits",type:"line",source:"site_plan","source-layer":"structures_exits_linestring",minzoom:0,paint:{"line-width":3,"line-color":"rgb(153, 144, 93)"}},{id:"structures_internal_linestring",type:"line",source:"site_plan","source-layer":"structures_internal_linestring",minzoom:0,paint:{"line-color":"rgba(90, 81, 31, 1)"}},{id:"structures_internal_polygon",type:"line",source:"site_plan","source-layer":"structures_internal_polygon",minzoom:0,paint:{"line-color":"rgba(90, 81, 31, 1)"}},{id:"walls",type:"line",source:"site_plan","source-layer":"walls_linestring"},{id:"fences",type:"line",source:"site_plan","source-layer":"fences_linestring",paint:{"line-color":"rgba(134, 134, 101, 1)"}},{id:"buildings",type:"fill-extrusion",source:"site_plan","source-layer":"buildings_polygon",layout:{},paint:{"fill-extrusion-color":"rgba(189, 170, 85, 1)","fill-extrusion-height":4}},{id:"services_comms_ducts_case",type:"line",source:"site_plan","source-layer":"services_comms_ducts_linestring",layout:{},paint:{"line-color":"rgba(150, 150, 150, 1)","line-width":3}},{id:"services_comms_ducts",type:"line",source:"site_plan","source-layer":"services_comms_ducts_linestring",layout:{},paint:{"line-color":"rgba(187, 0, 218, 1)","line-width":2}},{id:"services_comms_lines",type:"line",source:"site_plan","source-layer":"services_comms_buried_lines_linestring",layout:{},paint:{"line-color":"rgba(187, 0, 218, 1)","line-width":2}},{id:"services_comms_manholes",type:"circle",source:"site_plan","source-layer":"services_comms_manholes_point",minzoom:15,paint:{"circle-color":"rgba(187, 0, 218, 1)","circle-stroke-width":1}},{id:"services_comms_bt_poles",type:"circle",source:"site_plan","source-layer":"services_comms_bt_poles_point",minzoom:15,paint:{"circle-color":"rgba(136, 89, 6, 1)","circle-stroke-width":1}},{id:"services_comms_cabinets",type:"circle",source:"site_plan","source-layer":"services_comms_cabinets_point",minzoom:15,paint:{"circle-color":"rgba(218, 0, 62, 1)","circle-stroke-width":1}},{id:"services_comms_manholes_label-copy",type:"symbol",source:"site_plan","source-layer":"services_comms_manholes_point",minzoom:15,layout:{"text-field":"{id}","text-font":["Open Sans Regular"],"text-size":14,"text-offset":[-1,0]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":2}},{id:"services_comms_cabinets_label",type:"symbol",source:"site_plan","source-layer":"services_comms_cabinets_point",minzoom:15,layout:{"text-field":"{name}","text-font":["Open Sans Regular"],"text-size":12,"text-offset":[-2,0]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":2}},{id:"services_water_lines",type:"line",source:"site_plan","source-layer":"services_water_lines_linestring",layout:{},paint:{"line-color":"#00C5FF","line-width":2}},{id:"services_water_points",type:"circle",source:"site_plan","source-layer":"services_water_points_point",paint:{"circle-color":"rgba(0, 197, 255, 1)","circle-stroke-color":"rgba(22, 0, 195, 1)","circle-stroke-width":2,"circle-radius":3}},{id:"site_water_pipes",type:"line",source:"site_plan","source-layer":"water_pipes_linestring",paint:{"line-color":"rgba(0, 89, 255, 1)","line-width":2}},{id:"boundary",type:"line",source:"site_plan","source-layer":"heras_perimeter__linestring",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(226, 11, 11, 1)","line-dasharray":[10,3],"line-width":["interpolate",["linear"],["zoom"],10,1,17,2]}},{id:"dk_radius",type:"fill",source:"site_plan","source-layer":"noc_dk_radius_polygon",paint:{"fill-color":"rgba(169, 105, 163, 1)","fill-opacity":.3}},{id:"dk",type:"line",source:"site_plan","source-layer":"noc_dk_polygon",layout:{},paint:{}},{id:"dk_names",type:"symbol",source:"site_plan","source-layer":"noc_dk_names_point",minzoom:16,maxzoom:24,layout:{"symbol-placement":"point","text-field":"{text}","text-font":["Open Sans Regular"],"text-justify":"center","text-size":14,"text-padding":2,"symbol-avoid-edges":!0,"text-max-width":8},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(169, 105, 163, 1)","text-translate":[-4,0]}},{id:"noc_fiber",type:"line",source:"site_plan","source-layer":"noc_fibre_linestring",paint:{"line-opacity":1,"line-color":"rgba(147, 84, 150, 1)","line-width":2}},{id:"noc_fiber_labels",type:"symbol",source:"site_plan","source-layer":"noc_fibre_linestring",minzoom:19,maxzoom:24,layout:{"symbol-placement":"line","text-field":"Fiber ({length}m)","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-offset":[0,-1]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(147, 84, 150, 1)"}},{id:"noc_copper",type:"line",source:"site_plan","source-layer":"noc_copper_linestring",minzoom:0,paint:{"line-opacity":1,"line-color":"rgba(174, 127, 176, 1)","line-width":2}},{id:"noc_copper_labels",type:"symbol",source:"site_plan","source-layer":"noc_copper_linestring",minzoom:19,maxzoom:24,layout:{"symbol-placement":"line","text-field":"Cat5e ({length}m)","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-offset":[0,-1]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(174, 127, 176, 1)"}},{id:"noc_switch",type:"circle",source:"site_plan","source-layer":"noc_switch_point",minzoom:0,maxzoom:24,layout:{},paint:{"circle-color":"rgba(75, 0, 130, 1)","circle-radius":3}},{id:"noc_switch_labels",type:"symbol",source:"site_plan","source-layer":"noc_switch_point",minzoom:19,maxzoom:24,layout:{"symbol-placement":"point","symbol-spacing":1e3,"symbol-avoid-edges":!0,"text-field":"{switch}","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-anchor":"right","text-offset":[-1,0],"text-justify":"right"},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(75, 0, 130, 1)"}},{id:"power_generator",type:"line",source:"site_plan","source-layer":"power_generator_polygon",layout:{},paint:{"line-color":"magenta"}},{id:"power_400_3",type:"line",source:"site_plan","source-layer":"power_400_3_linestring",layout:{},paint:{"line-color":"rgba(255, 68, 0, 1)","line-width":4}},{id:"power_125_3",type:"line",source:"site_plan","source-layer":"power_125_3_linestring",layout:{},paint:{"line-color":"rgba(199, 33, 33, 1)","line-width":3}},{id:"power_63_3",type:"line",source:"site_plan","source-layer":"power_63_3_linestring",layout:{},paint:{"line-color":"rgba(199, 33, 33, 1)","line-width":2}},{id:"power_32_3",type:"line",source:"site_plan","source-layer":"power_32_3_linestring",layout:{},paint:{"line-color":"rgba(199, 33, 33, 1)","line-width":1}},{id:"power_32_1",type:"line",source:"site_plan","source-layer":"power_32_linestring",layout:{},paint:{"line-color":"rgba(11, 11, 214, 1)","line-width":2}},{id:"power_16_1",type:"line",source:"site_plan","source-layer":"power_16_linestring",layout:{},paint:{"line-color":"rgba(11, 11, 214, 1)","line-width":1}},{id:"power_400_3_labels",type:"symbol",source:"site_plan","source-layer":"power_400_3_linestring",minzoom:19,maxzoom:24,layout:{"symbol-placement":"line","text-field":"400A ({length}m)","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-offset":[0,-1]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(199, 33, 33, 1)"}},{id:"power_125_3_labels",type:"symbol",source:"site_plan","source-layer":"power_125_3_linestring",minzoom:19,maxzoom:24,layout:{"symbol-placement":"line","text-field":"125A ({length}m)","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-offset":[0,-1]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(199, 33, 33, 1)"}},{id:"power_63_3_labels",type:"symbol",source:"site_plan","source-layer":"power_63_3_linestring",minzoom:19,maxzoom:24,layout:{"symbol-placement":"line","text-field":"63A ({length}m)","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-offset":[0,-1]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(199, 33, 33, 1)"}},{id:"power_32_3_labels",type:"symbol",source:"site_plan","source-layer":"power_32_3_linestring",minzoom:19,maxzoom:24,layout:{"symbol-placement":"line","text-field":"32A ({length}m)","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-offset":[0,-1]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(199, 33, 33, 1)"}},{id:"power_32_1_labels",type:"symbol",source:"site_plan","source-layer":"power_32_linestring",minzoom:19,maxzoom:24,layout:{"symbol-placement":"line","text-field":"32A ({length}m)","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-offset":[0,-1]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(11, 11, 214, 1)"}},{id:"power_16_1_labels",type:"symbol",source:"site_plan","source-layer":"power_16_linestring",minzoom:19,maxzoom:24,layout:{"symbol-placement":"line","symbol-spacing":1e3,"text-field":"16A ({length}m)","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-offset":[0,-1]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(11, 11, 214, 1)"}},{id:"power_distro",type:"circle",source:"site_plan","source-layer":"power_distro_point",layout:{},paint:{"circle-color":["match",["get","distro"],"TOB/32","blue","TOB/16","blue","CABIN","blue","ColdRoom","blue","SOB","blue","SSB 1","blue","SSB 2","blue","MD1 32 1","blue","rgba(199, 33, 33, 1)"],"circle-radius":3}},{id:"power_distro_labels",type:"symbol",source:"site_plan","source-layer":"power_distro_point",minzoom:19,maxzoom:24,layout:{"symbol-placement":"point","symbol-spacing":1e3,"symbol-avoid-edges":!0,"text-field":`{name}
({distro})`,"text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-anchor":"left","text-offset":[1,0]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":["match",["get","distro"],"TOB/32","blue","TOB/16","blue","CABIN","blue","ColdRoom","blue","SOB","blue","SSB 1","blue","SSB 2","blue","MD1 32 1","blue","rgba(199, 33, 33, 1)"]}},{id:"lighting_festoon",type:"line",source:"site_plan","source-layer":"lighting_festoon_linestring",layout:{},paint:{"line-color":"rgba(200, 184, 42, 1)","line-width":2}},{id:"lighting_festoon_labels",type:"symbol",source:"site_plan","source-layer":"lighting_festoon_linestring",minzoom:19,maxzoom:24,layout:{"symbol-placement":"line","text-field":"Festoon ({length}m)","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-allow-overlap":!1,"text-offset":[0,-1]},paint:{"text-halo-color":"rgba(241, 241, 241, 0.8)","text-halo-width":3,"text-color":"rgba(200, 184, 42, 1)"}},{id:"villages_symbol",type:"circle",source:"villages","source-layer":"",minzoom:16,paint:{"circle-color":"rgb(246, 163, 24)","circle-radius":["interpolate",["linear"],["zoom"],16,6,24,26],"circle-blur":.5,"circle-stroke-width":.5}},{id:"background_trees",type:"symbol",source:"site_plan","source-layer":"natural_trees_point",minzoom:13,layout:{"icon-image":"tree","icon-size":["interpolate",["exponential",1.5],["zoom"],14,.01,22,["*",["to-number",["coalesce",["get","size"],.6]],2.5]],"icon-allow-overlap":!0,"icon-rotate":["%",["*",["get","gid"],200],360]},paint:{}},{id:"villages_text",type:"symbol",source:"villages","source-layer":"",minzoom:17,maxzoom:24,layout:{"text-field":"{name}","text-font":["Open Sans Regular"],"text-offset":[0,-1.8],"text-size":["interpolate",["linear"],["zoom"],17,11,24,16]},paint:{"text-halo-color":"rgba(244, 235, 247, 0.73)","text-halo-width":2,"text-halo-blur":1}},{id:"labels_camping",type:"symbol",source:"site_plan","source-layer":"camping_centroid",minzoom:16,maxzoom:24,layout:{"text-field":"Camping: {camping}","text-font":["Open Sans Regular"],"text-justify":"center","text-size":["interpolate",["linear"],["zoom"],16,10,24,24],"text-padding":2,"symbol-placement":"point","symbol-spacing":1e3,"symbol-avoid-edges":!0,"text-max-width":8},paint:{"text-halo-width":3,"text-halo-blur":4,"text-halo-color":"rgba(241, 241, 241, 1)"}},{id:"labels_gate",type:"symbol",source:"site_plan","source-layer":"labels_gate_labels_point",minzoom:16,maxzoom:24,layout:{"text-field":"{text}","text-size":12,"text-optional":!1,"text-font":["Open Sans Regular"],"text-keep-upright":!0,"text-ignore-placement":!1,"text-allow-overlap":!1},paint:{"text-halo-color":"rgba(241, 241, 241, 1)","text-halo-width":3,"text-halo-blur":4,"text-color":"rgba(0, 0, 0, 1)"}},{id:"labels_streets",type:"symbol",source:"site_plan","source-layer":"streets_linestring",minzoom:16,layout:{"text-field":"{name}","text-font":["Raleway SemiBold"],"text-size":["interpolate",["linear"],["zoom"],16,8,17,9,23,50],"text-max-angle":10,"symbol-placement":"line","symbol-spacing":500},paint:{"text-halo-color":"rgba(120, 120, 120, 1)","text-halo-width":15,"text-halo-blur":40,"text-color":"rgba(250, 250, 250, 1)"}},{id:"labels_main_3",type:"symbol",filter:["!",["has","priority"]],source:"site_plan","source-layer":"labels_point",minzoom:17.5,layout:{"text-field":"{text}","text-font":["Raleway SemiBold"],"text-size":13,"text-optional":!1},paint:{"text-halo-color":"rgba(241, 241, 241, 1)","text-halo-width":3,"text-halo-blur":1,"text-color":"rgba(0, 0, 0, 1)"}},{id:"labels_main_2",type:"symbol",filter:["==",["get","priority"],"2"],source:"site_plan","source-layer":"labels_point",minzoom:16,layout:{"text-field":"{text}","text-font":["Raleway SemiBold"],"text-size":["interpolate",["linear"],["zoom"],16,6,23,30],"text-optional":!1},paint:{"text-halo-color":"rgba(241, 241, 241, 1)","text-halo-width":3,"text-halo-blur":1,"text-color":"rgba(0, 0, 0, 1)"}},{id:"labels_main_1",type:"symbol",filter:["==",["get","priority"],"1"],source:"site_plan","source-layer":"labels_point",minzoom:15,layout:{"text-field":"{text}","text-font":["Raleway SemiBold"],"text-size":["interpolate",["linear"],["zoom"],15,10,23,40],"text-optional":!1},paint:{"text-halo-color":"rgba(241, 241, 241, 1)","text-halo-width":3,"text-halo-blur":1,"text-color":"rgba(0, 0, 0, 1)"}}],yn={version:8,name:"EMF",center:[-2.376986,52.041328],zoom:17.19,bearing:25,pitch:0,sources:{openmaptiles:{type:"vector",url:"https://api.maptiler.com/tiles/v3/tiles.json?key=iiaOS0kq1MPr2LlHPTSa"},site_plan:{type:"vector",url:"https://map.emfcamp.org/capabilities/buildmap"},villages:{type:"geojson",data:"https://www.emfcamp.org/api/villages.geojson"},slope:{type:"raster",tiles:["https://map.emfcamp.org/data/slope/{z}/{x}/{y}"],attribution:"Elevation data © Environment Agency 2022. All rights reserved."},hillshade:{type:"raster",tiles:["https://map.emfcamp.org/data/hillshade/{z}/{x}/{y}"],attribution:"Elevation data © Environment Agency 2022. All rights reserved."},ortho:{type:"raster",tiles:["https://map.emfcamp.org/data/ortho/{z}/{x}/{y}"]}},sprite:"https://openmaptiles.github.io/positron-gl-style/sprite",glyphs:"https://map.emfcamp.org/fonts/{fontstack}/{range}.pbf",layers:Zn(Jn,[o=>o.zindex||0]).map(o=>{const{zindex:t,...i}=o;return i})};function Yn(o,t){var i=Qn(o),a=i.tag,l=i.id,u=i.className,f=t?document.createElementNS(t,a):document.createElement(a);return l&&(f.id=l),u&&(t?f.setAttribute("class",u):f.className=u),f}function Qn(o){for(var t=o.split(/([.#])/),i="",a="",l=1;l<t.length;l+=2)switch(t[l]){case".":i+=" "+t[l+1];break;case"#":a=t[l+1]}return{className:i.trim(),tag:t[0]||"div",id:a}}function xt(o,t){var i=W(o),a=W(t);return t===a&&a.__redom_view&&(t=a.__redom_view),a.parentNode&&(xn(t,a,i),i.removeChild(a)),t}function xn(o,t,i){var a=t.__redom_lifecycle;if(_n(a)){t.__redom_lifecycle={};return}var l=i;for(t.__redom_mounted&&St(t,"onunmount");l;){var u=l.__redom_lifecycle||{};for(var f in a)u[f]&&(u[f]-=a[f]);_n(u)&&(l.__redom_lifecycle=null),l=l.parentNode}}function _n(o){if(o==null)return!0;for(var t in o)if(o[t])return!1;return!0}var er=["onmount","onremount","onunmount"],tr=typeof window<"u"&&"ShadowRoot"in window;function be(o,t,i,a){var l=W(o),u=W(t);t===u&&u.__redom_view&&(t=u.__redom_view),t!==u&&(u.__redom_view=t);var f=u.__redom_mounted,h=u.parentNode;if(f&&h!==l&&xn(t,u,h),i!=null)if(a){var _=W(i);_.__redom_mounted&&St(_,"onunmount"),l.replaceChild(u,_)}else l.insertBefore(u,W(i));else l.appendChild(u);return ir(t,u,l,h),t}function St(o,t){t==="onmount"||t==="onremount"?o.__redom_mounted=!0:t==="onunmount"&&(o.__redom_mounted=!1);var i=o.__redom_lifecycle;if(i){var a=o.__redom_view,l=0;a&&a[t]&&a[t]();for(var u in i)u&&l++;if(l)for(var f=o.firstChild;f;){var h=f.nextSibling;St(f,t),f=h}}}function ir(o,t,i,a){for(var l=t.__redom_lifecycle||(t.__redom_lifecycle={}),u=i===a,f=!1,h=0,_=er;h<_.length;h+=1){var S=_[h];u||o!==t&&S in o&&(l[S]=(l[S]||0)+1),l[S]&&(f=!0)}if(!f){t.__redom_lifecycle={};return}var w=i,x=!1;for((u||w&&w.__redom_mounted)&&(St(t,u?"onremount":"onmount"),x=!0);w;){var L=w.parentNode,j=w.__redom_lifecycle||(w.__redom_lifecycle={});for(var O in l)j[O]=(j[O]||0)+l[O];if(x)break;(w.nodeType===Node.DOCUMENT_NODE||tr&&w instanceof ShadowRoot||L&&L.__redom_mounted)&&(St(w,u?"onremount":"onmount"),x=!0),w=L}}function Sn(o,t,i){var a=W(o);if(typeof t=="object")for(var l in t)mn(a,l,t[l]);else mn(a,t,i)}function mn(o,t,i){o.style[t]=i??""}var gn="http://www.w3.org/1999/xlink";function zn(o,t,i,a){var l=W(o),u=typeof t=="object";if(u)for(var f in t)zn(l,f,t[f]);else{var h=l instanceof SVGElement,_=typeof i=="function";if(t==="style"&&typeof i=="object")Sn(l,i);else if(h&&_)l[t]=i;else if(t==="dataset")Ln(l,i);else if(!h&&(t in l||_)&&t!=="list")l[t]=i;else{if(h&&t==="xlink"){Cn(l,i);return}t==="class"&&(i=l.className+" "+i),i==null?l.removeAttribute(t):l.setAttribute(t,i)}}}function Cn(o,t,i){if(typeof t=="object")for(var a in t)Cn(o,a,t[a]);else i!=null?o.setAttributeNS(gn,t,i):o.removeAttributeNS(gn,t,i)}function Ln(o,t,i){if(typeof t=="object")for(var a in t)Ln(o,a,t[a]);else i!=null?o.dataset[t]=i:delete o.dataset[t]}function nr(o){return document.createTextNode(o??"")}function An(o,t,i){for(var a=0,l=t;a<l.length;a+=1){var u=l[a];if(!(u!==0&&!u)){var f=typeof u;f==="function"?u(o):f==="string"||f==="number"?o.appendChild(nr(u)):Tn(W(u))?be(o,u):u.length?An(o,u):f==="object"&&zn(o,u,null)}}}function rr(o){return typeof o=="string"?wt(o):W(o)}function W(o){return o.nodeType&&o||!o.el&&o||W(o.el)}function Tn(o){return o&&o.nodeType}function wt(o){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var a,l=typeof o;if(l==="string")a=Yn(o);else if(l==="function"){var u=o;a=new(Function.prototype.bind.apply(u,[null].concat(t)))}else throw new Error("At least one argument required");return An(W(a),t),a}var C=wt;wt.extend=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return wt.bind.apply(wt,[this].concat(t))};function ii(o){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var a=W(o),l=Pn(o,t,a.firstChild);l;){var u=l.nextSibling;xt(o,l),l=u}}function Pn(o,t,i){for(var a=i,l=Array(t.length),u=0;u<t.length;u++)l[u]=t[u]&&W(t[u]);for(var f=0;f<t.length;f++){var h=t[f];if(h){var _=l[f];if(_===a){a=a.nextSibling;continue}if(Tn(_)){var S=a&&a.nextSibling,w=h.__redom_index!=null,x=w&&S===l[f+1];be(o,h,a,x),x&&(a=S);continue}h.length!=null&&(a=Pn(o,h,a))}}return a}var On=function(t,i,a){this.View=t,this.initData=a,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],i!=null&&(this.key=typeof i=="function"?i:or(i))};On.prototype.update=function(t,i){for(var a=this,l=a.View,u=a.key,f=a.initData,h=u!=null,_=this.lookup,S={},w=Array(t.length),x=this.views,L=0;L<t.length;L++){var j=t[L],O=void 0;if(h){var U=u(j);O=_[U]||new l(f,j,L,t),S[U]=O,O.__redom_id=U}else O=x[L]||new l(f,j,L,t);O.update&&O.update(j,L,t,i);var Y=W(O.el);Y.__redom_view=O,w[L]=O}this.oldViews=x,this.views=w,this.oldLookup=_,this.lookup=S};function or(o){return function(t){return t[o]}}function cn(o,t,i,a){return new nt(o,t,i,a)}var nt=function(t,i,a,l){this.View=i,this.initData=l,this.views=[],this.pool=new On(i,a,l),this.el=rr(t),this.keySet=a!=null};nt.prototype.update=function(t,i){t===void 0&&(t=[]);var a=this,l=a.keySet,u=this.views;this.pool.update(t,i);var f=this.pool,h=f.views,_=f.lookup;if(l)for(var S=0;S<u.length;S++){var w=u[S],x=w.__redom_id;_[x]==null&&(w.__redom_index=null,xt(this,w))}for(var L=0;L<h.length;L++){var j=h[L];j.__redom_index=L}ii(this,h),l&&(this.lookup=_),this.views=h};nt.extend=function(t,i,a,l){return nt.bind(nt,t,i,a,l)};cn.extend=nt.extend;function En(o,t){t=Math.round(t*100)/100;const i=Math.ceil((t*Math.LN2+Math.log(512/360))/Math.LN10),a=Math.pow(10,i),l=Math.round(o[0]*a)/a,u=Math.round(o[1]*a)/a;return[l,u]}class ar{constructor(t){b(this,"location");b(this,"marker");b(this,"_map");b(this,"urlHash");this.location=null,this.marker=null,this.urlHash=t,this.urlHash.registerHandler("m",i=>this.setURLString(i))}getURLString(){return this.location?`${this.location[1]},${this.location[0]}`:null}setURLString(t){let i;try{const a=t.split(",");i=[parseFloat(a[1]),parseFloat(a[0])],(!i[0]||!i[1])&&(i=null)}catch{i=null}(!this.location||!i||this.location[0]!=i[0]||this.location[1]!=i[1])&&(this.location=i,this.updateLocation())}setLocation(t){this._map&&(t?this.location=En([t.lng,t.lat],this._map.getZoom()):this.location=null,this.updateLocation(),this.urlHash.setParameter("m",this.getURLString()))}updateLocation(){this._map&&(this.marker&&(this.marker.remove(),this.marker=null),this.location&&(this.marker=new Ne.Marker({color:"#BA0000"}).setLngLat(this.location).addTo(this._map)))}onAdd(t){return this._map=t,this._map.on("load",()=>{this.updateLocation()}),C("div")}onRemove(){this._map=void 0}}var Mn=9007199254740991,lr="[object Arguments]",sr="[object Function]",cr="[object GeneratorFunction]",ur=/^(?:0|[1-9]\d*)$/;function pr(o,t){for(var i=-1,a=Array(o);++i<o;)a[i]=t(i);return a}function fr(o,t){return function(i){return o(t(i))}}var ri=Object.prototype,un=ri.hasOwnProperty,Rn=ri.toString,dr=ri.propertyIsEnumerable,hr=fr(Object.keys,Object);function yr(o,t){var i=Cr(o)||zr(o)?pr(o.length,String):[],a=i.length,l=!!a;for(var u in o)un.call(o,u)&&!(l&&(u=="length"||xr(u,a)))&&i.push(u);return i}var _r=vr();function mr(o,t){return o&&_r(o,t,Mr)}function gr(o,t,i,a){return mr(o,function(l,u,f){t(a,i(l),u,f)}),a}function br(o){if(!Sr(o))return hr(o);var t=[];for(var i in Object(o))un.call(o,i)&&i!="constructor"&&t.push(i);return t}function vr(o){return function(t,i,a){for(var l=-1,u=Object(t),f=a(t),h=f.length;h--;){var _=f[++l];if(i(u[_],_,u)===!1)break}return t}}function wr(o,t){return function(i,a){return gr(i,o,t(a),{})}}function xr(o,t){return t=t??Mn,!!t&&(typeof o=="number"||ur.test(o))&&o>-1&&o%1==0&&o<t}function Sr(o){var t=o&&o.constructor,i=typeof t=="function"&&t.prototype||ri;return o===i}function zr(o){return Lr(o)&&un.call(o,"callee")&&(!dr.call(o,"callee")||Rn.call(o)==lr)}var Cr=Array.isArray;function jn(o){return o!=null&&Tr(o.length)&&!Ar(o)}function Lr(o){return Or(o)&&jn(o)}function Ar(o){var t=Pr(o)?Rn.call(o):"";return t==sr||t==cr}function Tr(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Mn}function Pr(o){var t=typeof o;return!!o&&(t=="object"||t=="function")}function Or(o){return!!o&&typeof o=="object"}var Er=wr(function(o,t,i){o[t]=i},Rr(jr));function Mr(o){return jn(o)?yr(o):br(o)}function Rr(o){return function(){return o}}function jr(o){return o}var kr=Er;const Dr=sn(kr);var ni={exports:{}};ni.exports;(function(o,t){var i=200,a="__lodash_hash_undefined__",l=1,u=2,f=9007199254740991,h="[object Arguments]",_="[object Array]",S="[object AsyncFunction]",w="[object Boolean]",x="[object Date]",L="[object Error]",j="[object Function]",O="[object GeneratorFunction]",U="[object Map]",Y="[object Number]",te="[object Null]",H="[object Object]",N="[object Promise]",ie="[object Proxy]",q="[object RegExp]",ke="[object Set]",rt="[object String]",ot="[object Symbol]",zt="[object Undefined]",Le="[object WeakMap]",Ct="[object ArrayBuffer]",Ge="[object DataView]",oi="[object Float32Array]",ai="[object Float64Array]",li="[object Int8Array]",si="[object Int16Array]",ci="[object Int32Array]",ui="[object Uint8Array]",pi="[object Uint8ClampedArray]",fi="[object Uint16Array]",di="[object Uint32Array]",hi=/[\\^$.*+?()[\]{}|]/g,yi=/^\[object .+?Constructor\]$/,_i=/^(?:0|[1-9]\d*)$/,M={};M[oi]=M[ai]=M[li]=M[si]=M[ci]=M[ui]=M[pi]=M[fi]=M[di]=!0,M[h]=M[_]=M[Ct]=M[w]=M[Ge]=M[x]=M[L]=M[j]=M[U]=M[Y]=M[H]=M[q]=M[ke]=M[rt]=M[Le]=!1;var Lt=typeof je=="object"&&je&&je.Object===Object&&je,mi=typeof self=="object"&&self&&self.Object===Object&&self,A=Lt||mi||Function("return this")(),at=t&&!t.nodeType&&t,At=at&&!0&&o&&!o.nodeType&&o,se=At&&At.exports===at,Ke=se&&Lt.process,lt=function(){try{return Ke&&Ke.binding&&Ke.binding("util")}catch{}}(),Tt=lt&&lt.isTypedArray;function Pt(r,s){for(var d=-1,m=r==null?0:r.length,E=0,z=[];++d<m;){var D=r[d];s(D,d,r)&&(z[E++]=D)}return z}function Ot(r,s){for(var d=-1,m=s.length,E=r.length;++d<m;)r[E+d]=s[d];return r}function Et(r,s){for(var d=-1,m=r==null?0:r.length;++d<m;)if(s(r[d],d,r))return!0;return!1}function gi(r,s){for(var d=-1,m=Array(r);++d<r;)m[d]=s(d);return m}function Mt(r){return function(s){return r(s)}}function bi(r,s){return r.has(s)}function vi(r,s){return r==null?void 0:r[s]}function wi(r){var s=-1,d=Array(r.size);return r.forEach(function(m,E){d[++s]=[E,m]}),d}function xi(r,s){return function(d){return r(s(d))}}function Si(r){var s=-1,d=Array(r.size);return r.forEach(function(m){d[++s]=m}),d}var Rt=Array.prototype,zi=Function.prototype,Ae=Object.prototype,st=A["__core-js_shared__"],jt=zi.toString,ne=Ae.hasOwnProperty,kt=function(){var r=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Dt=Ae.toString,We=RegExp("^"+jt.call(ne).replace(hi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=se?A.Buffer:void 0,De=A.Symbol,ct=A.Uint8Array,re=Ae.propertyIsEnumerable,Te=Rt.splice,ve=De?De.toStringTag:void 0,$e=Object.getOwnPropertySymbols,$t=qe?qe.isBuffer:void 0,Ci=xi(Object.keys,Object),ut=Ee(A,"DataView"),Pe=Ee(A,"Map"),pt=Ee(A,"Promise"),Ze=Ee(A,"Set"),Be=Ee(A,"WeakMap"),ce=Ee(Object,"create"),ft=ze(ut),dt=ze(Pe),ht=ze(pt),Ie=ze(Ze),Li=ze(Be),Bt=De?De.prototype:void 0,yt=Bt?Bt.valueOf:void 0;function we(r){var s=-1,d=r==null?0:r.length;for(this.clear();++s<d;){var m=r[s];this.set(m[0],m[1])}}function Ai(){this.__data__=ce?ce(null):{},this.size=0}function Ve(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}function _t(r){var s=this.__data__;if(ce){var d=s[r];return d===a?void 0:d}return ne.call(s,r)?s[r]:void 0}function It(r){var s=this.__data__;return ce?s[r]!==void 0:ne.call(s,r)}function xe(r,s){var d=this.__data__;return this.size+=this.has(r)?0:1,d[r]=ce&&s===void 0?a:s,this}we.prototype.clear=Ai,we.prototype.delete=Ve,we.prototype.get=_t,we.prototype.has=It,we.prototype.set=xe;function ue(r){var s=-1,d=r==null?0:r.length;for(this.clear();++s<d;){var m=r[s];this.set(m[0],m[1])}}function Ti(){this.__data__=[],this.size=0}function Pi(r){var s=this.__data__,d=Ye(s,r);if(d<0)return!1;var m=s.length-1;return d==m?s.pop():Te.call(s,d,1),--this.size,!0}function Oi(r){var s=this.__data__,d=Ye(s,r);return d<0?void 0:s[d][1]}function Ei(r){return Ye(this.__data__,r)>-1}function pe(r,s){var d=this.__data__,m=Ye(d,r);return m<0?(++this.size,d.push([r,s])):d[m][1]=s,this}ue.prototype.clear=Ti,ue.prototype.delete=Pi,ue.prototype.get=Oi,ue.prototype.has=Ei,ue.prototype.set=pe;function Se(r){var s=-1,d=r==null?0:r.length;for(this.clear();++s<d;){var m=r[s];this.set(m[0],m[1])}}function Mi(){this.size=0,this.__data__={hash:new we,map:new(Pe||ue),string:new we}}function Ri(r){var s=Oe(this,r).delete(r);return this.size-=s?1:0,s}function ji(r){return Oe(this,r).get(r)}function ki(r){return Oe(this,r).has(r)}function fe(r,s){var d=Oe(this,r),m=d.size;return d.set(r,s),this.size+=d.size==m?0:1,this}Se.prototype.clear=Mi,Se.prototype.delete=Ri,Se.prototype.get=ji,Se.prototype.has=ki,Se.prototype.set=fe;function Xe(r){var s=-1,d=r==null?0:r.length;for(this.__data__=new Se;++s<d;)this.add(r[s])}function Di(r){return this.__data__.set(r,a),this}function $i(r){return this.__data__.has(r)}Xe.prototype.add=Xe.prototype.push=Di,Xe.prototype.has=$i;function _e(r){var s=this.__data__=new ue(r);this.size=s.size}function Bi(){this.__data__=new ue,this.size=0}function Je(r){var s=this.__data__,d=s.delete(r);return this.size=s.size,d}function Ii(r){return this.__data__.get(r)}function Fi(r){return this.__data__.has(r)}function de(r,s){var d=this.__data__;if(d instanceof ue){var m=d.__data__;if(!Pe||m.length<i-1)return m.push([r,s]),this.size=++d.size,this;d=this.__data__=new Se(m)}return d.set(r,s),this.size=d.size,this}_e.prototype.clear=Bi,_e.prototype.delete=Je,_e.prototype.get=Ii,_e.prototype.has=Fi,_e.prototype.set=de;function Ui(r,s){var d=et(r),m=!d&&en(r),E=!d&&!m&&mt(r),z=!d&&!m&&!E&&Vt(r),D=d||m||E||z,B=D?gi(r.length,String):[],F=B.length;for(var R in r)ne.call(r,R)&&!(D&&(R=="length"||E&&(R=="offset"||R=="parent")||z&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||Vi(R,F)))&&B.push(R);return B}function Ye(r,s){for(var d=r.length;d--;)if(Kt(r[d][0],s))return d;return-1}function Hi(r,s,d){var m=s(r);return et(r)?m:Ot(m,d(r))}function Fe(r){return r==null?r===void 0?zt:te:ve&&ve in Object(r)?qi(r):Qi(r)}function Ft(r){return Ue(r)&&Fe(r)==h}function Ut(r,s,d,m,E){return r===s?!0:r==null||s==null||!Ue(r)&&!Ue(s)?r!==r&&s!==s:Qe(r,s,d,m,Ut,E)}function Qe(r,s,d,m,E,z){var D=et(r),B=et(s),F=D?_:me(r),R=B?_:me(s);F=F==h?H:F,R=R==h?H:R;var G=F==H,Q=R==H,$=F==R;if($&&mt(r)){if(!mt(s))return!1;D=!0,G=!1}if($&&!G)return z||(z=new _e),D||Vt(r)?Ht(r,s,d,m,E,z):Nt(r,s,F,d,m,E,z);if(!(d&l)){var I=G&&ne.call(r,"__wrapped__"),Z=Q&&ne.call(s,"__wrapped__");if(I||Z){var oe=I?r.value():r,ee=Z?s.value():s;return z||(z=new _e),E(oe,ee,d,m,z)}}return $?(z||(z=new _e),Wi(r,s,d,m,E,z)):!1}function Ni(r){if(!gt(r)||Ji(r))return!1;var s=qt(r)?We:yi;return s.test(ze(r))}function Gi(r){return Ue(r)&&Zt(r.length)&&!!M[Fe(r)]}function Ki(r){if(!Yi(r))return Ci(r);var s=[];for(var d in Object(r))ne.call(r,d)&&d!="constructor"&&s.push(d);return s}function Ht(r,s,d,m,E,z){var D=d&l,B=r.length,F=s.length;if(B!=F&&!(D&&F>B))return!1;var R=z.get(r);if(R&&z.get(s))return R==s;var G=-1,Q=!0,$=d&u?new Xe:void 0;for(z.set(r,s),z.set(s,r);++G<B;){var I=r[G],Z=s[G];if(m)var oe=D?m(Z,I,G,s,r,z):m(I,Z,G,r,s,z);if(oe!==void 0){if(oe)continue;Q=!1;break}if($){if(!Et(s,function(ee,he){if(!bi($,he)&&(I===ee||E(I,ee,d,m,z)))return $.push(he)})){Q=!1;break}}else if(!(I===Z||E(I,Z,d,m,z))){Q=!1;break}}return z.delete(r),z.delete(s),Q}function Nt(r,s,d,m,E,z,D){switch(d){case Ge:if(r.byteLength!=s.byteLength||r.byteOffset!=s.byteOffset)return!1;r=r.buffer,s=s.buffer;case Ct:return!(r.byteLength!=s.byteLength||!z(new ct(r),new ct(s)));case w:case x:case Y:return Kt(+r,+s);case L:return r.name==s.name&&r.message==s.message;case q:case rt:return r==s+"";case U:var B=wi;case ke:var F=m&l;if(B||(B=Si),r.size!=s.size&&!F)return!1;var R=D.get(r);if(R)return R==s;m|=u,D.set(r,s);var G=Ht(B(r),B(s),m,E,z,D);return D.delete(r),G;case ot:if(yt)return yt.call(r)==yt.call(s)}return!1}function Wi(r,s,d,m,E,z){var D=d&l,B=Gt(r),F=B.length,R=Gt(s),G=R.length;if(F!=G&&!D)return!1;for(var Q=F;Q--;){var $=B[Q];if(!(D?$ in s:ne.call(s,$)))return!1}var I=z.get(r);if(I&&z.get(s))return I==s;var Z=!0;z.set(r,s),z.set(s,r);for(var oe=D;++Q<F;){$=B[Q];var ee=r[$],he=s[$];if(m)var ye=D?m(he,ee,$,s,r,z):m(ee,he,$,r,s,z);if(!(ye===void 0?ee===he||E(ee,he,d,m,z):ye)){Z=!1;break}oe||(oe=$=="constructor")}if(Z&&!oe){var ge=r.constructor,it=s.constructor;ge!=it&&"constructor"in r&&"constructor"in s&&!(typeof ge=="function"&&ge instanceof ge&&typeof it=="function"&&it instanceof it)&&(Z=!1)}return z.delete(r),z.delete(s),Z}function Gt(r){return Hi(r,tt,Zi)}function Oe(r,s){var d=r.__data__;return Xi(s)?d[typeof s=="string"?"string":"hash"]:d.map}function Ee(r,s){var d=vi(r,s);return Ni(d)?d:void 0}function qi(r){var s=ne.call(r,ve),d=r[ve];try{r[ve]=void 0;var m=!0}catch{}var E=Dt.call(r);return m&&(s?r[ve]=d:delete r[ve]),E}var Zi=$e?function(r){return r==null?[]:(r=Object(r),Pt($e(r),function(s){return re.call(r,s)}))}:nn,me=Fe;(ut&&me(new ut(new ArrayBuffer(1)))!=Ge||Pe&&me(new Pe)!=U||pt&&me(pt.resolve())!=N||Ze&&me(new Ze)!=ke||Be&&me(new Be)!=Le)&&(me=function(r){var s=Fe(r),d=s==H?r.constructor:void 0,m=d?ze(d):"";if(m)switch(m){case ft:return Ge;case dt:return U;case ht:return N;case Ie:return ke;case Li:return Le}return s});function Vi(r,s){return s=s??f,!!s&&(typeof r=="number"||_i.test(r))&&r>-1&&r%1==0&&r<s}function Xi(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function Ji(r){return!!kt&&kt in r}function Yi(r){var s=r&&r.constructor,d=typeof s=="function"&&s.prototype||Ae;return r===d}function Qi(r){return Dt.call(r)}function ze(r){if(r!=null){try{return jt.call(r)}catch{}try{return r+""}catch{}}return""}function Kt(r,s){return r===s||r!==r&&s!==s}var en=Ft(function(){return arguments}())?Ft:function(r){return Ue(r)&&ne.call(r,"callee")&&!re.call(r,"callee")},et=Array.isArray;function Wt(r){return r!=null&&Zt(r.length)&&!qt(r)}var mt=$t||Me;function tn(r,s){return Ut(r,s)}function qt(r){if(!gt(r))return!1;var s=Fe(r);return s==j||s==O||s==S||s==ie}function Zt(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=f}function gt(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}function Ue(r){return r!=null&&typeof r=="object"}var Vt=Tt?Mt(Tt):Gi;function tt(r){return Wt(r)?Ui(r):Ki(r)}function nn(){return[]}function Me(){return!1}o.exports=tn})(ni,ni.exports);var $r=ni.exports;const Br=sn($r);class Ir{constructor(t,i=[]){this._layers=t,this._identifiers=this._initLayerIdentifiers(),this._default_visible=i,this._layerList=cn("ul",Fr,"name"),this._container=C("div",[C("h3","Layers"),this._layerList],{class:"layer-switcher-list"}),be(document.body,this._container),this._visible=[...i]}_initLayerIdentifiers(){let t={};return Object.keys(this._layers).sort().forEach(i=>{let a=1,l=null;do l=i.slice(0,a),a++;while(l in t);t[l]=i}),t}_getLayerIdentifiers(){let t=[],i=Dr(this._identifiers);return this._visible.sort().forEach(a=>{t.push(i[a])}),t}_updateVisibility(){if(this._map){var t=this._map.getStyle().layers;for(let i of t){let a=i.id;for(let l in this._layers){let u=this._layers[l];a.startsWith(u)&&(this._visible.includes(l)?this._map.setLayoutProperty(a,"visibility","visible"):this._map.setLayoutProperty(a,"visibility","none"))}}this.urlhash&&this.urlhash._updateHash()}}setInitialVisibility(t){for(let i of t.layers)for(let a in this._layers){let l=this._layers[a];i.id.startsWith(l)&&!this._visible.includes(i.id)&&(i.layout||(i.layout={}),i.layout.visibility="none")}this._updateList()}getURLString(){return Br(this._visible.sort(),this._default_visible.sort())?"":this._getLayerIdentifiers().join(",")}setURLString(t){var i;if(t){const a=t.split(",");a.length==0?this._visible=[...this._default_visible]:this._visible=a.map(l=>this._identifiers[l]).filter(l=>l)}else this._visible=[...this._default_visible];!((i=this._map)===null||i===void 0)&&i.isStyleLoaded()&&this._updateVisibility(),this._updateList()}onAdd(t){this._map=t,t.isStyleLoaded()?this._updateVisibility():t.on("load",()=>{this._updateVisibility()});const i=C("button",{class:"layer-switcher-button","aria-label":"Layer Switcher"});return i.onmouseover=a=>{var l=i.getBoundingClientRect();this._container.style.top=l.top+"px",this._container.style.right=document.documentElement.clientWidth-l.right+"px",this._container.style.display="block"},this._container.onmouseleave=a=>{this._container.style.display="none"},C("div",i,{class:"maplibregl-ctrl maplibregl-ctrl-group layer-switcher"})}onRemove(){var t;(t=this._container.parentNode)===null||t===void 0||t.removeChild(this._container),this._map=void 0}_updateList(){this._layerList.update(Object.keys(this._layers).map(t=>({enabled:this._visible.includes(t),name:t})),this)}}class Fr{constructor(){this._checkbox=C("input",{type:"checkbox"}),this._label=C("label"),this.el=C("li",this._label),this._checkbox.onchange=t=>this.onChange(t)}onChange(t){if(!this.layerSwitcher)return;const i=this._label.innerText;t.target.checked?this.layerSwitcher._visible.push(i):this.layerSwitcher._visible=this.layerSwitcher._visible.filter(a=>a!==i),this.layerSwitcher._updateVisibility()}update(t,i,a,l){this.layerSwitcher=l;let u="layerSwitch"+i;this._checkbox.id=u,this._label.setAttribute("for",u),this._checkbox.checked=t.enabled,this._label.innerText=t.name,be(this._label,this._checkbox)}}function Ur(o){const t=o.replace("#","").split("/");let i={additional:{}};if(t.length<3)return i;i.layers="",i.zoom=+t[0],i.center=[+t[2],+t[1]];for(let a=3;a<t.length;a++){let l=t[a],u=l.match(/^(\w+)=(.*)$/);u?(i.additional=i.additional||{},i.additional[u[1]]=u[2]):i.layers=l}return i}function Hr(o){if(!o.zoom||!o.center)return"";const t=Math.round(o.zoom*100)/100,i=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,i),l=Math.round(o.center[0]*a)/a,u=Math.round(o.center[1]*a)/a;let f=`#${t}/${u}/${l}`;if(o.layers&&(f+="/"+o.layers),o.additional)for(let h in o.additional)f+="/"+h+"="+o.additional[h];return f}class Nr{constructor(t){this.layerSwitcher=t,this.additional={},this.handlers={}}enable(t){this._map=t,this._onHashChange(window.location.hash),t.on("moveend",()=>{this._updateHash()}),window.addEventListener("hashchange",()=>{this._onHashChange(window.location.hash)},!1)}registerHandler(t,i){this.handlers[t]=i}setParameter(t,i){this.additional[t]!==i&&(i===null?delete this.additional[t]:this.additional[t]=i,this._updateHash())}_fireParameterChange(t,i){this.handlers[t]&&this.handlers[t](i)}_onHashChange(t){var i;const a=Ur(t);let l=[...Object.keys(a.additional),...Object.keys(this.additional)];for(let u of l)this.additional[u]&&!a.additional[u]?(delete this.additional[u],this._fireParameterChange(u,null)):a.additional[u]&&this.additional[u]!==a.additional[u]&&(this.additional[u]=a.additional[u],this._fireParameterChange(u,a.additional[u]));!((i=this._map)===null||i===void 0)&&i.isStyleLoaded()&&a.center&&a.zoom&&this._map.jumpTo({center:a.center,zoom:a.zoom}),this.layerSwitcher&&a.layers!==void 0&&this.layerSwitcher.setURLString(a.layers)}_updateHash(){const t=this.getHashString();try{window.history.replaceState(window.history.state,"",t)}catch(i){console.log(i)}}getHashString(){if(!this._map)throw new Error("getHashString called before map initialised");const{lng:t,lat:i}=this._map.getCenter(),a={center:[t,i],zoom:this._map.getZoom(),additional:this.additional};return this.layerSwitcher&&(a.layers=this.layerSwitcher.getURLString()),Hr(a)}init(t){t.hash=!1;const i=window.location.hash.replace("#","").split("/");return i.length>=3&&(t.center=[+i[2],+i[1]],t.zoom=+i[0]),t}}var J=63710088e-1,Gr={centimeters:J*100,centimetres:J*100,degrees:J/111325,feet:J*3.28084,inches:J*39.37,kilometers:J/1e3,kilometres:J/1e3,meters:J,metres:J,miles:J/1609.344,millimeters:J*1e3,millimetres:J*1e3,nauticalmiles:J/1852,radians:1,yards:J*1.0936};function an(o,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=o,a}function Kr(o,t,i){if(i===void 0&&(i={}),o.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:o};return an(a,t,i)}function Wr(o,t){t===void 0&&(t="kilometers");var i=Gr[t];if(!i)throw new Error(t+" units is invalid");return o*i}function ei(o){var t=o%360;return t*Math.PI/180}function bn(o){if(!o)throw new Error("coord is required");if(!Array.isArray(o)){if(o.type==="Feature"&&o.geometry!==null&&o.geometry.type==="Point")return o.geometry.coordinates;if(o.type==="Point")return o.coordinates}if(Array.isArray(o)&&o.length>=2&&!Array.isArray(o[0])&&!Array.isArray(o[1]))return o;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qr(o,t,i){i===void 0&&(i={});var a=bn(o),l=bn(t),u=ei(l[1]-a[1]),f=ei(l[0]-a[0]),h=ei(a[1]),_=ei(l[1]),S=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(h)*Math.cos(_);return Wr(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)),i.units)}function kn(o,t,i){if(o!==null)for(var a,l,u,f,h,_,S,w=0,x=0,L,j=o.type,O=j==="FeatureCollection",U=j==="Feature",Y=O?o.features.length:1,te=0;te<Y;te++){S=O?o.features[te].geometry:U?o.geometry:o,L=S?S.type==="GeometryCollection":!1,h=L?S.geometries.length:1;for(var H=0;H<h;H++){var N=0,ie=0;if(f=L?S.geometries[H]:S,f!==null){_=f.coordinates;var q=f.type;switch(w=0,q){case null:break;case"Point":if(t(_,x,te,N,ie)===!1)return!1;x++,N++;break;case"LineString":case"MultiPoint":for(a=0;a<_.length;a++){if(t(_[a],x,te,N,ie)===!1)return!1;x++,q==="MultiPoint"&&N++}q==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(a=0;a<_.length;a++){for(l=0;l<_[a].length-w;l++){if(t(_[a][l],x,te,N,ie)===!1)return!1;x++}q==="MultiLineString"&&N++,q==="Polygon"&&ie++}q==="Polygon"&&N++;break;case"MultiPolygon":for(a=0;a<_.length;a++){for(ie=0,l=0;l<_[a].length;l++){for(u=0;u<_[a][l].length-w;u++){if(t(_[a][l][u],x,te,N,ie)===!1)return!1;x++}ie++}N++}break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(kn(f.geometries[a],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Zr(o,t){var i,a,l,u,f,h,_,S,w,x,L=0,j=o.type==="FeatureCollection",O=o.type==="Feature",U=j?o.features.length:1;for(i=0;i<U;i++){for(h=j?o.features[i].geometry:O?o.geometry:o,S=j?o.features[i].properties:O?o.properties:{},w=j?o.features[i].bbox:O?o.bbox:void 0,x=j?o.features[i].id:O?o.id:void 0,_=h?h.type==="GeometryCollection":!1,f=_?h.geometries.length:1,l=0;l<f;l++){if(u=_?h.geometries[l]:h,u===null){if(t(null,L,S,w,x)===!1)return!1;continue}switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(u,L,S,w,x)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<u.geometries.length;a++)if(t(u.geometries[a],L,S,w,x)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}L++}}function Vr(o,t){Zr(o,function(i,a,l,u,f){var h=i===null?null:i.type;switch(h){case null:case"Point":case"LineString":case"Polygon":return t(an(i,l,{bbox:u,id:f}),a,0)===!1?!1:void 0}var _;switch(h){case"MultiPoint":_="Point";break;case"MultiLineString":_="LineString";break;case"MultiPolygon":_="Polygon";break}for(var S=0;S<i.coordinates.length;S++){var w=i.coordinates[S],x={type:_,coordinates:w};if(t(an(x,l),a,S)===!1)return!1}})}function Xr(o,t){Vr(o,function(i,a,l){var u=0;if(i.geometry){var f=i.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var h,_=0,S=0,w=0;if(kn(i,function(x,L,j,O,U){if(h===void 0||a>_||O>S||U>w){h=x,_=a,S=O,w=U,u=0;return}var Y=Kr([h,x],i.properties);if(t(Y,a,l,U,u)===!1)return!1;u++,h=x})===!1)return!1}}})}function Jr(o,t,i){var a=i,l=!1;return Xr(o,function(u,f,h,_,S){l===!1&&i===void 0?a=u:a=t(a,u,f,h,_,S),l=!0}),a}function Yr(o,t){return t===void 0&&(t={}),Jr(o,function(i,a){var l=a.geometry.coordinates;return i+qr(l[0],l[1],t)},0)}class Qr{constructor(){b(this,"_container");b(this,"_distanceButton");b(this,"_map");b(this,"_distanceContainer");b(this,"_touchAllowance");b(this,"_measuring",!1);b(this,"_geojson");b(this,"_linestring");this._touchAllowance=20,this._container=C("div",{class:"maplibregl-ctrl maplibregl-ctrl-group distance-switch"}),this._distanceButton=C("button",{type:"button","aria-label":"DistanceMeasure","aria-pressed":"false",title:"Measure distance"}),this._geojson={type:"FeatureCollection",features:[]},this._linestring={type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{}}}onAdd(t){return this._map=t,document.addEventListener("keyup",i=>{i.key==="Escape"&&this._measuring&&this._removeMeasuring()}),this._distanceContainer=document.getElementById("distance"),this._container.appendChild(this._distanceButton),this._distanceButton.addEventListener("click",this._onClickDistanceMeasure.bind(this)),this._map.on("click",i=>this._measure(i)),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}_onClickDistanceMeasure(){this._measuring?this._removeMeasuring():this._setupMeasuring()}_setupMeasuring(){!this._map||this._measuring==!0||(this._container.classList.add("measuring"),this._measuring=!0,this._map.getCanvas().style.cursor="crosshair",this._map.addSource("geojson",{type:"geojson",data:this._geojson}),this._map.addLayer({id:"measure-points",type:"circle",source:"geojson",paint:{"circle-radius":5,"circle-color":"#000"},filter:["in","$type","Point"]}),this._map.addLayer({id:"measure-lines",type:"line",source:"geojson",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":2.5},filter:["in","$type","LineString"]}))}_removeMeasuring(){!this._map||this._measuring==!1||(this._measuring=!1,this._container.classList.remove("measuring"),this._map.getCanvas().style.cursor="",this._map.removeLayer("measure-points"),this._map.removeLayer("measure-lines"),this._map.removeSource("geojson"),this._distanceContainer.innerHTML="",this._geojson.features=[])}_measure(t){if(!this._measuring||!this._map)return;const i=[[t.point.x-this._touchAllowance,t.point.y-this._touchAllowance],[t.point.x+this._touchAllowance,t.point.y+this._touchAllowance]];var a=this._map.queryRenderedFeatures(i,{layers:["measure-points"]});if(this._geojson.features.length>1&&this._geojson.features.pop(),this._distanceContainer.innerHTML="",a.length){var l=a[0].properties.id;this._geojson.features=this._geojson.features.filter(function(u){return u.properties.id!==l})}else{const u={type:"Feature",geometry:{type:"Point",coordinates:[t.lngLat.lng,t.lngLat.lat]},properties:{id:String(new Date().getTime())}};this._geojson.features.push(u)}if(this._geojson.features.length>1){this._linestring.geometry.coordinates=this._geojson.features.map(function(f){return f.geometry.coordinates}),this._geojson.features.push(this._linestring);const u=document.createElement("pre");u.textContent="Total distance: "+(Yr(this._linestring)*1e3).toLocaleString()+"m",this._distanceContainer.appendChild(u)}this._map.getSource("geojson").setData(this._geojson)}}class eo{constructor(t){b(this,"map");b(this,"_menu");b(this,"_menuList");b(this,"coords",null);b(this,"items",[]);this.map=t,this._menuList=cn("ul",to,"text"),this._menu=C("div",this._menuList,{class:"contextMenu"}),be(this.map.getContainer(),this._menu),t.on("contextmenu",i=>{this._menuList.update(this.items,this),this._menu.style.top=i.point.y+"px",this._menu.style.left=i.point.x+"px",this._menu.style.display="block",this.coords=i.lngLat}),t.on("click",()=>{this._menu.style.display="none",this.coords=null})}addItem(t,i,a){this.items.push({text:t,callback:i,isEnabled:a})}}class to{constructor(){b(this,"el");this.el=C("li")}update(t,i,a,l){this.el.innerText=t.text;const u=!t.isEnabled||t.isEnabled(l.coords);this.el.classList.toggle("disabled",!u),u?this.el.onclick=f=>{l.coords&&(l._menu.style.display="none",t.callback(f,l.coords))}:this.el.onclick=null}}class io{constructor(t,i){b(this,"el");b(this,"onSelected");b(this,"selectedVillage");b(this,"villages");if(this.villages=t,i||(i=t[0].id),t.length==1){this.el=C("div",t[0].name),this.selectedVillage=t[0].id;return}this.el=C("select",{name:"village"}),t.forEach(a=>{const l=C("option",a.name,{value:a.id});a.id==i&&(l.selected=!0,this.selectedVillage=a.id),be(this.el,l)}),this.el.onchange=()=>{this.selectedVillage=parseInt(this.el.value),this.onSelected&&this.onSelected(this.getSelected())}}getSelected(){return this.villages.find(t=>t.id==this.selectedVillage)}}class no{constructor(t,i){b(this,"map");b(this,"onClose");b(this,"onSubmit");b(this,"onDelete");b(this,"village_selector");b(this,"el");b(this,"location_selector");this.map=t,this.el=C(".villages-create"),this.create(i)}create(t){const i=C(".villages-close");i.onclick=()=>{this.onClose&&this.onClose()};const a=C("button","Place Village",{type:"submit",disabled:!0});a.onclick=h=>{this.onSubmit&&this.onSubmit(this.getData()),h.preventDefault()};const l=C(".form-group",a);this.village_selector=new io(t);const u=this.village_selector.getSelected();this.location_selector=new ro(this.map,u.lng,u.lat),this.location_selector.onSelect=()=>{a.removeAttribute("disabled")},this.village_selector.onSelected=h=>{this.location_selector.setLocation(h.lng,h.lat)};const f=C("form",C("div.form-group",C("label","Village"),this.village_selector),this.location_selector,l);ii(this.el,[i,C("h3","Place Village"),C("p","Use this tool to select the location of your village. If you've already placed your village, this will update it. Note that we can't guarantee you'll have enough space at the location you've chosen."),f])}getData(){if(!this.village_selector)return null;const t=this.village_selector.getSelected();return t?(t.location=[this.location_selector.lng,this.location_selector.lat],t):null}}class ro{constructor(t,i=null,a=null){b(this,"map");b(this,"lat");b(this,"lng");b(this,"geojson");b(this,"el");b(this,"onSelect");this.lng=i,this.lat=a,this.map=t,this.geojson={type:"FeatureCollection",features:[]},this.handleClick=this.handleClick.bind(this),this.el=C(".form-group #location-selector"),this.onSelect=null,this.render()}setLocation(t,i){this.lng=t,this.lat=i,this.render()}onmount(){this.map.addSource("location-selector",{type:"geojson",data:this.geojson}),this.map.addLayer({id:"location-selector",type:"circle",source:"location-selector",paint:{"circle-radius":10,"circle-color":"#05e"}})}onunmount(){this.map.removeLayer("location-selector"),this.map.removeSource("location-selector")}render(){let t;this.lng!=null?t=C("button","Change location"):t=C("button","Select location"),t.onclick=()=>this.start(),ii(this,[t])}start(){const t=C("a","cancel",{href:"#"});t.onclick=i=>{i.preventDefault(),this.cancelClick()},ii(this,[C("p#village-status","Click on the map to select a location (",t,")")]),this.map.getCanvas().style.cursor="pointer",this.map.on("click",this.handleClick)}cancelClick(){this.map.getCanvas().style.cursor="",this.map.off("click",this.handleClick),this.render()}handleClick(t){this.lng=t.lngLat.lng,this.lat=t.lngLat.lat,this.cancelClick(),this.geojson.features=[{type:"Feature",geometry:{type:"Point",coordinates:[t.lngLat.lng,t.lngLat.lat]}}];const i=this.map.getSource("location-selector");i==null||i.setData(this.geojson),this.onSelect&&this.onSelect()}}class oo{constructor(t,i){b(this,"_source");b(this,"_layer");b(this,"_api_url");b(this,"_permissions",[]);b(this,"_map");b(this,"_wrapper");b(this,"_user_id");b(this,"villages");b(this,"button");b(this,"popup");this._source=t,this._layer=i,this._api_url="https://www.emfcamp.org",this.popup=null,this.button=C("button",{title:"Place village"}),this._wrapper=C("div",this.button,{class:"maplibregl-ctrl maplibregl-ctrl-group villages-ctrl",style:"display:none"})}is_admin(){return this._permissions.includes("admin")||this._permissions.includes("villages")}description(t){const i=t.properties;let a=i.name;i.url&&(a=C("a",a,{target:"_blank",href:i.url}));const l=C(".villages-object",C("h3",a));return i.description&&be(l,C("p",i.description)),l}addClickHandlers(t){t.on("click",this._layer,a=>{const l=a.features[0];this.popup=new Ne.Popup().setLngLat(a.lngLat).setDOMContent(this.description(l)).addTo(t)});let i="";t.on("mouseenter",this._layer,()=>{i=t.getCanvas().style.cursor,t.getCanvas().style.cursor="pointer"}),t.on("mouseleave",this._layer,()=>{t.getCanvas().style.cursor=i})}async getUserDetails(){const t=await this.fetch("/api/user/current");if(!t.ok)return;const i=await this.fetch("/api/villages/mine?all=true"),a=await t.json();this._permissions=a.permissions,this._user_id=a.id,this.villages=await i.json(),this.villages&&this.villages.length>0&&Sn(this._wrapper,"display","block")}onAdd(t){return this._map=t,this.addClickHandlers(t),this.button.onclick=()=>{this.createForm(),this.button.disabled=!0},this.getUserDetails(),this._wrapper}onRemove(){this.popup&&this.popup.remove()}createForm(){if(!this._map||!this.villages)return;const t=new no(this._map,this.villages),i=()=>{xt(document.body,t),this.button.disabled=!1};t.onClose=i,t.onSubmit=a=>{if(!a){console.log("No data on form submit");return}const l=`/api/villages/${a.id}`;this.post_data(l,a,"POST").then(u=>{u.status==200?(i(),this.refreshLayer()):u.json().then(f=>{console.log(f.message)})})},be(document.body,t)}refreshLayer(){const t=this._map.getSource(this._source);if(!t)return;const i=t._data;t.setData({type:"FeatureCollection",features:[]}),t.setData(i)}fetch(t){return fetch(this._api_url+t,{credentials:"include"})}post_data(t,i,a="POST"){return fetch(this._api_url+t,{method:a,credentials:"include",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)})}}class ao{constructor(){b(this,"_deferredPrompt");b(this,"_container");b(this,"_map");this._deferredPrompt=null,this._container=this.createControl(),window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),!localStorage.getItem("pwa_closed")&&(this._deferredPrompt=t,this._container.style.display="block")})}createControl(){const t=C("button.btn#install-button","Install");t.onclick=a=>{a.preventDefault(),this._container.style.display="none",this._deferredPrompt.prompt(),this._deferredPrompt.userChoice.then(l=>{l.outcome==="accepted"&&console.log("PWA choice accepted"),this._deferredPrompt=null})};const i=C("button.btn#install-close","Close");return i.onclick=a=>{a.preventDefault(),this._container.style.display="none",localStorage.setItem("pwa_closed","true")},C("div#install-prompt.maplibregl-ctrl",C("p","You can install this site as an app for easy access"),t,i,{style:"display:none"})}onAdd(t){return this._map=t,this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}}function vn(o,t,i){return Math.round(t*Math.pow(2,i-o))}class lo{constructor(t){b(this,"_map");b(this,"exportZoom",18);b(this,"pixelRatio",4);b(this,"initFunc");this.initFunc=t}doExport(){const t=this._map._container;let i=t.clientWidth,a=t.clientHeight;const l=this._map.getZoom();this.exportZoom>this._map.getZoom()&&(i=vn(l,i,this.exportZoom),a=vn(l,a,this.exportZoom));const u=C("div",{style:{width:i+"px",height:a+"px"}}),f=C("div",u,{style:{visibility:"hidden"}});be(document.body,f);const h=C("div.progressWrapper",C("div.progressWindow","Saving map as image, please wait..."));be(document.body,h);const _=new Ne.Map({container:u,style:this._map.getStyle(),center:this._map.getCenter(),pixelRatio:this.pixelRatio,maxCanvasSize:[4096,4096],zoom:this.exportZoom,interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1});this.initFunc&&this.initFunc(_),_.once("idle",()=>{const S=_.getCanvas(),w=C("a",{href:S.toDataURL(),download:"map.png"});w.click(),w.remove(),_.remove(),xt(document.body,f),xt(document.body,h)})}onAdd(t){this._map=t;const i=C("button.export",{type:"button",title:"Download image"});return i.onclick=()=>this.doExport(),C("div",i,{class:"maplibregl-ctrl maplibregl-ctrl-group"})}onRemove(){this._map=void 0}}const so={1:{},2:{},svg:{}};async function wn(o){const t=Math.min(Math.round(window.devicePixelRatio),2),i=so[t.toString()],a=["camping","no-access","water","tree"];Promise.all(a.map(l=>async()=>{const u=await o.loadImage(i[l]);o.addImage(l,u.data,{pixelRatio:t})}).map(l=>l()))}class co{constructor(){b(this,"layers",{Background:"background_",Slope:"slope",Hillshade:"hillshade","Aerial Imagery":"ortho",Structures:"structures_",Paths:"paths_","Buried Services":"services_",Water:"site_water_",DKs:"dk_","NOC-Physical":"noc_",Power:"power_",Lighting:"lighting_",Villages:"villages_"});b(this,"map");b(this,"layer_switcher");b(this,"url_hash");b(this,"marker")}init(){Wn({immediate:!0});const t=["Background","Structures","Paths","Villages"];this.layer_switcher=new Ir(this.layers,t),this.url_hash=new Nr(this.layer_switcher),this.layer_switcher.urlhash=this.url_hash,this.marker=new ar(this.url_hash),this.layer_switcher.setInitialVisibility(yn),this.map=new Ne.Map(this.url_hash.init({container:"map",style:yn,pitchWithRotate:!1,dragRotate:!1,preserveDrawingBuffer:!0})),wn(this.map),this.map.touchZoomRotate.disableRotation(),new URL(window.location.href).searchParams.get("embed")=="true"?document.querySelector("header").style.display="none":(this.map.addControl(new Ne.NavigationControl,"top-right"),this.map.addControl(new Ne.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),this.map.addControl(new Ne.ScaleControl({maxWidth:200,unit:"metric"})),this.map.addControl(new Qr,"top-right"),this.map.addControl(new ao,"top-left"),this.map.addControl(new oo("villages","villages_symbol"),"top-right"),window.matchMedia("(min-width: 600px)").matches&&this.map.addControl(new lo(wn),"top-right")),this.map.addControl(this.layer_switcher,"top-right"),this.url_hash.enable(this.map),this.map.addControl(this.marker,"top-right");const l=new eo(this.map);l.addItem("Set marker",(u,f)=>{this.marker.setLocation(f)}),l.addItem("Clear marker",()=>{this.marker.setLocation(null)},()=>this.marker.location!=null),l.addItem("Copy coordinates",(u,f)=>{const[h,_]=En([f.lng,f.lat],this.map.getZoom());navigator.clipboard.writeText(_+", "+h)})}}const ln=new co;document.readyState!="loading"?ln.init():document.addEventListener("DOMContentLoaded",ln.init);function uo(){let o=ln.map.getCanvas().toDataURL();localStorage.setItem("map",o)}setInterval(uo,1e3);
//# sourceMappingURL=index-BUtuYmCI.js.map
